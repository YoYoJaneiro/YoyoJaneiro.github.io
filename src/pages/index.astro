---
import BaseLayout from "../layouts/BaseLayout.astro";
import HorizontalCard from "../components/HorizontalCard.astro";
import { getCollection } from "astro:content";
import dayjs from "dayjs";
import Button from "../components/Button.astro";

const projects = (await getCollection("projects")).sort((a, b) => {
	if (a.data.order === b.data.order) {
		const aDate = dayjs(a.data.creationDate);
		const bDate = dayjs(b.data.creationDate);
		return bDate - aDate;
	}
	return a.data.order - b.data.order;
});
const MAX_PROJECTS = 4;
const shownProjects = projects.slice(0, MAX_PROJECTS - 1);
// const lastProject = projects[MAX_PROJECTS - 1];
---

<BaseLayout sideBarActiveItemID="home">
	<div class="pb-12 mt-5">
		<div class="text-xl py-1">Hey there ðŸ‘‹</div>
		<div class="text-5xl">I'm <b>Yoyo Janeiro</b></div>
		<div class="text-3xl py-3">
			a <b>Digital Artist</b><br />
			 specializing in <b>Game art</b>!
		</div>
		<div class="py-2">
			<text class="text-lg">
				I am currently doing a <b>Bachelor's degree</b> at <a
					href="https://www.sae.edu/ch-ge/"><b>SAE Institute</b></a
				> and working on other projects on the side.<br />
				
			</text>
		</div>
		<br />
		<div class="text-2xl w-full mb-2">
			<b>Use the buttons below to see</b>
		</div>
		<br />
		<div class="flex">
			<Button href="https://YoyoJaneiro.github.io/projects">
				Projects
			</Button>
			<Button href="https://YoyoJaneiro.github.io/cv">CV</Button>
		</div>
	</div>
	<br />
	<div>
		<div class="text-3xl w-full font-bold mb-2">Last projects</div>
	</div>
	{
		shownProjects.map((project) => (
			<>
				<HorizontalCard
					title={project.data.title}
					img={project.data.heroImage}
					desc={project.data.description}
					url={"/projects/" + project.slug}
					target="_self"
				/>
				<div class="divider my-0" />
			</>
		))
	}

	<div class="mt-8">
		<a class="btn btn-outline ml-5" href="/projects">See more...</a>
	</div>
</BaseLayout>
